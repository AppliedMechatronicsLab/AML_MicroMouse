ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"AML_MPUSensor.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.AML_MPUSensor_Setup,"ax",%progbits
  18              		.align	1
  19              		.global	AML_MPUSensor_Setup
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	AML_MPUSensor_Setup:
  27              	.LFB130:
  28              		.file 1 "Core/Src/AML_MPUSensor.c"
   1:Core/Src/AML_MPUSensor.c **** #include "AML_MPUSensor.h"
   2:Core/Src/AML_MPUSensor.c **** 
   3:Core/Src/AML_MPUSensor.c **** extern UART_HandleTypeDef huart1;
   4:Core/Src/AML_MPUSensor.c **** extern DMA_HandleTypeDef hdma_usart1_rx;
   5:Core/Src/AML_MPUSensor.c **** PID_TypeDef pid;
   6:Core/Src/AML_MPUSensor.c **** 
   7:Core/Src/AML_MPUSensor.c **** uint8_t data[33];
   8:Core/Src/AML_MPUSensor.c **** uint8_t buffer = 100;
   9:Core/Src/AML_MPUSensor.c **** extern int16_t debug[100];
  10:Core/Src/AML_MPUSensor.c **** double angle, out, SetPoint = 0, Kp = 1.5, Ki = 0, Kd = 0;
  11:Core/Src/AML_MPUSensor.c **** 
  12:Core/Src/AML_MPUSensor.c **** 
  13:Core/Src/AML_MPUSensor.c **** void AML_MPUSensor_Setup()
  14:Core/Src/AML_MPUSensor.c **** {
  29              		.loc 1 14 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
  15:Core/Src/AML_MPUSensor.c ****     HAL_UART_Receive_DMA(&huart1, data, 33);
  37              		.loc 1 15 5 view .LVU1
  38 0002 2122     		movs	r2, #33
  39 0004 0249     		ldr	r1, .L3
  40 0006 0348     		ldr	r0, .L3+4
  41 0008 FFF7FEFF 		bl	HAL_UART_Receive_DMA
  42              	.LVL0:
  16:Core/Src/AML_MPUSensor.c **** }
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s 			page 2


  43              		.loc 1 16 1 is_stmt 0 view .LVU2
  44 000c 08BD     		pop	{r3, pc}
  45              	.L4:
  46 000e 00BF     		.align	2
  47              	.L3:
  48 0010 00000000 		.word	data
  49 0014 00000000 		.word	huart1
  50              		.cfi_endproc
  51              	.LFE130:
  53              		.section	.text.test,"ax",%progbits
  54              		.align	1
  55              		.global	test
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  59              		.fpu fpv4-sp-d16
  61              	test:
  62              	.LFB131:
  17:Core/Src/AML_MPUSensor.c **** 
  18:Core/Src/AML_MPUSensor.c **** void test()
  19:Core/Src/AML_MPUSensor.c **** {
  63              		.loc 1 19 1 is_stmt 1 view -0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		@ link register save eliminated.
  20:Core/Src/AML_MPUSensor.c ****     
  21:Core/Src/AML_MPUSensor.c **** }
  68              		.loc 1 21 1 view .LVU4
  69 0000 7047     		bx	lr
  70              		.cfi_endproc
  71              	.LFE131:
  73              		.section	.text.handle,"ax",%progbits
  74              		.align	1
  75              		.global	handle
  76              		.syntax unified
  77              		.thumb
  78              		.thumb_func
  79              		.fpu fpv4-sp-d16
  81              	handle:
  82              	.LFB132:
  22:Core/Src/AML_MPUSensor.c **** 
  23:Core/Src/AML_MPUSensor.c **** void handle()
  24:Core/Src/AML_MPUSensor.c **** {
  83              		.loc 1 24 1 view -0
  84              		.cfi_startproc
  85              		@ args = 0, pretend = 0, frame = 0
  86              		@ frame_needed = 0, uses_anonymous_args = 0
  87 0000 08B5     		push	{r3, lr}
  88              		.cfi_def_cfa_offset 8
  89              		.cfi_offset 3, -8
  90              		.cfi_offset 14, -4
  25:Core/Src/AML_MPUSensor.c ****     while (buffer != 85) // wait 0x55
  91              		.loc 1 25 5 view .LVU6
  92              	.L7:
  93              		.loc 1 25 11 view .LVU7
  94              		.loc 1 25 19 is_stmt 0 view .LVU8
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s 			page 3


  95 0002 0F4B     		ldr	r3, .L11
  96 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  97              		.loc 1 25 11 view .LVU9
  98 0006 552B     		cmp	r3, #85
  99 0008 0CD0     		beq	.L10
  26:Core/Src/AML_MPUSensor.c ****     {
  27:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive(&huart1, &buffer, 1, 1000);
 100              		.loc 1 27 9 is_stmt 1 view .LVU10
 101 000a 4FF47A73 		mov	r3, #1000
 102 000e 0122     		movs	r2, #1
 103 0010 0B49     		ldr	r1, .L11
 104 0012 0C48     		ldr	r0, .L11+4
 105 0014 FFF7FEFF 		bl	HAL_UART_Receive
 106              	.LVL1:
  28:Core/Src/AML_MPUSensor.c ****         debug[0]++;
 107              		.loc 1 28 9 view .LVU11
 108              		.loc 1 28 14 is_stmt 0 view .LVU12
 109 0018 0B4A     		ldr	r2, .L11+8
 110 001a B2F90030 		ldrsh	r3, [r2]
 111              		.loc 1 28 17 view .LVU13
 112 001e 0133     		adds	r3, r3, #1
 113 0020 1380     		strh	r3, [r2]	@ movhi
 114 0022 EEE7     		b	.L7
 115              	.L10:
  29:Core/Src/AML_MPUSensor.c ****     }
  30:Core/Src/AML_MPUSensor.c ****     buffer = 70;
 116              		.loc 1 30 5 is_stmt 1 view .LVU14
 117              		.loc 1 30 12 is_stmt 0 view .LVU15
 118 0024 064B     		ldr	r3, .L11
 119 0026 4622     		movs	r2, #70
 120 0028 1A70     		strb	r2, [r3]
  31:Core/Src/AML_MPUSensor.c ****     debug[1]++;
 121              		.loc 1 31 5 is_stmt 1 view .LVU16
 122              		.loc 1 31 10 is_stmt 0 view .LVU17
 123 002a 074A     		ldr	r2, .L11+8
 124 002c B2F90230 		ldrsh	r3, [r2, #2]
 125              		.loc 1 31 13 view .LVU18
 126 0030 0133     		adds	r3, r3, #1
 127 0032 5380     		strh	r3, [r2, #2]	@ movhi
  32:Core/Src/AML_MPUSensor.c ****     HAL_UART_Receive_DMA(&huart1, data, 33);
 128              		.loc 1 32 5 is_stmt 1 view .LVU19
 129 0034 2122     		movs	r2, #33
 130 0036 0549     		ldr	r1, .L11+12
 131 0038 0248     		ldr	r0, .L11+4
 132 003a FFF7FEFF 		bl	HAL_UART_Receive_DMA
 133              	.LVL2:
  33:Core/Src/AML_MPUSensor.c **** }
 134              		.loc 1 33 1 is_stmt 0 view .LVU20
 135 003e 08BD     		pop	{r3, pc}
 136              	.L12:
 137              		.align	2
 138              	.L11:
 139 0040 00000000 		.word	.LANCHOR0
 140 0044 00000000 		.word	huart1
 141 0048 00000000 		.word	debug
 142 004c 00000000 		.word	data
 143              		.cfi_endproc
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s 			page 4


 144              	.LFE132:
 146              		.global	__aeabi_i2d
 147              		.global	__aeabi_dmul
 148              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 149              		.align	1
 150              		.global	HAL_UART_RxCpltCallback
 151              		.syntax unified
 152              		.thumb
 153              		.thumb_func
 154              		.fpu fpv4-sp-d16
 156              	HAL_UART_RxCpltCallback:
 157              	.LVL3:
 158              	.LFB133:
  34:Core/Src/AML_MPUSensor.c **** 
  35:Core/Src/AML_MPUSensor.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)
  36:Core/Src/AML_MPUSensor.c **** {
 159              		.loc 1 36 1 is_stmt 1 view -0
 160              		.cfi_startproc
 161              		@ args = 0, pretend = 0, frame = 0
 162              		@ frame_needed = 0, uses_anonymous_args = 0
  37:Core/Src/AML_MPUSensor.c ****     /* Prevent unused argument(s) compilation warning */
  38:Core/Src/AML_MPUSensor.c ****     UNUSED(huart);
 163              		.loc 1 38 5 view .LVU22
  39:Core/Src/AML_MPUSensor.c ****     if (huart->Instance == USART1)
 164              		.loc 1 39 5 view .LVU23
 165              		.loc 1 39 14 is_stmt 0 view .LVU24
 166 0000 0268     		ldr	r2, [r0]
 167              		.loc 1 39 8 view .LVU25
 168 0002 164B     		ldr	r3, .L21
 169 0004 9A42     		cmp	r2, r3
 170 0006 00D0     		beq	.L20
 171 0008 7047     		bx	lr
 172              	.L20:
  36:Core/Src/AML_MPUSensor.c ****     /* Prevent unused argument(s) compilation warning */
 173              		.loc 1 36 1 view .LVU26
 174 000a 10B5     		push	{r4, lr}
 175              		.cfi_def_cfa_offset 8
 176              		.cfi_offset 4, -8
 177              		.cfi_offset 14, -4
  40:Core/Src/AML_MPUSensor.c ****     {
  41:Core/Src/AML_MPUSensor.c ****         if (data[0] != 83)
 178              		.loc 1 41 9 is_stmt 1 view .LVU27
 179              		.loc 1 41 17 is_stmt 0 view .LVU28
 180 000c 144B     		ldr	r3, .L21+4
 181 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 182              		.loc 1 41 12 view .LVU29
 183 0010 532B     		cmp	r3, #83
 184 0012 02D0     		beq	.L15
  42:Core/Src/AML_MPUSensor.c ****         {
  43:Core/Src/AML_MPUSensor.c ****             handle();
 185              		.loc 1 43 13 is_stmt 1 view .LVU30
 186 0014 FFF7FEFF 		bl	handle
 187              	.LVL4:
  44:Core/Src/AML_MPUSensor.c ****             return;
 188              		.loc 1 44 13 view .LVU31
 189              	.L13:
  45:Core/Src/AML_MPUSensor.c ****         }
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s 			page 5


  46:Core/Src/AML_MPUSensor.c ****         debug[2]++;
  47:Core/Src/AML_MPUSensor.c ****         angle = (((data[6] << 8) | data[5]) / 32768.0) * 180;
  48:Core/Src/AML_MPUSensor.c ****         PID_Compute(&pid);
  49:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
  50:Core/Src/AML_MPUSensor.c ****     }
  51:Core/Src/AML_MPUSensor.c **** }...
 190              		.loc 1 51 1 is_stmt 0 view .LVU32
 191 0018 10BD     		pop	{r4, pc}
 192              	.LVL5:
 193              	.L15:
  46:Core/Src/AML_MPUSensor.c ****         debug[2]++;
 194              		.loc 1 46 9 is_stmt 1 view .LVU33
  46:Core/Src/AML_MPUSensor.c ****         debug[2]++;
 195              		.loc 1 46 14 is_stmt 0 view .LVU34
 196 001a 124A     		ldr	r2, .L21+8
 197 001c B2F90430 		ldrsh	r3, [r2, #4]
  46:Core/Src/AML_MPUSensor.c ****         debug[2]++;
 198              		.loc 1 46 17 view .LVU35
 199 0020 0133     		adds	r3, r3, #1
 200 0022 9380     		strh	r3, [r2, #4]	@ movhi
  47:Core/Src/AML_MPUSensor.c ****         angle = (((data[6] << 8) | data[5]) / 32768.0) * 180;
 201              		.loc 1 47 9 is_stmt 1 view .LVU36
  47:Core/Src/AML_MPUSensor.c ****         angle = (((data[6] << 8) | data[5]) / 32768.0) * 180;
 202              		.loc 1 47 24 is_stmt 0 view .LVU37
 203 0024 0E4C     		ldr	r4, .L21+4
 204 0026 A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 205              	.LVL6:
  47:Core/Src/AML_MPUSensor.c ****         angle = (((data[6] << 8) | data[5]) / 32768.0) * 180;
 206              		.loc 1 47 40 view .LVU38
 207 0028 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
  47:Core/Src/AML_MPUSensor.c ****         angle = (((data[6] << 8) | data[5]) / 32768.0) * 180;
 208              		.loc 1 47 45 view .LVU39
 209 002a 43EA0020 		orr	r0, r3, r0, lsl #8
 210 002e FFF7FEFF 		bl	__aeabi_i2d
 211              	.LVL7:
 212 0032 0022     		movs	r2, #0
 213 0034 4FF07C53 		mov	r3, #1056964608
 214 0038 FFF7FEFF 		bl	__aeabi_dmul
 215              	.LVL8:
  47:Core/Src/AML_MPUSensor.c ****         angle = (((data[6] << 8) | data[5]) / 32768.0) * 180;
 216              		.loc 1 47 56 view .LVU40
 217 003c 0022     		movs	r2, #0
 218 003e 0A4B     		ldr	r3, .L21+12
 219 0040 FFF7FEFF 		bl	__aeabi_dmul
 220              	.LVL9:
  47:Core/Src/AML_MPUSensor.c ****         angle = (((data[6] << 8) | data[5]) / 32768.0) * 180;
 221              		.loc 1 47 15 view .LVU41
 222 0044 094B     		ldr	r3, .L21+16
 223 0046 C3E90001 		strd	r0, [r3]
  48:Core/Src/AML_MPUSensor.c ****         PID_Compute(&pid);
 224              		.loc 1 48 9 is_stmt 1 view .LVU42
 225 004a 0948     		ldr	r0, .L21+20
 226 004c FFF7FEFF 		bl	PID_Compute
 227              	.LVL10:
  49:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
 228              		.loc 1 49 9 view .LVU43
 229 0050 2122     		movs	r2, #33
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s 			page 6


 230 0052 2146     		mov	r1, r4
 231 0054 0748     		ldr	r0, .L21+24
 232 0056 FFF7FEFF 		bl	HAL_UART_Receive_DMA
 233              	.LVL11:
 234 005a DDE7     		b	.L13
 235              	.L22:
 236              		.align	2
 237              	.L21:
 238 005c 00100140 		.word	1073811456
 239 0060 00000000 		.word	data
 240 0064 00000000 		.word	debug
 241 0068 00806640 		.word	1080459264
 242 006c 00000000 		.word	angle
 243 0070 00000000 		.word	pid
 244 0074 00000000 		.word	huart1
 245              		.cfi_endproc
 246              	.LFE133:
 248              		.global	Kd
 249              		.global	Ki
 250              		.global	Kp
 251              		.global	SetPoint
 252              		.comm	out,8,8
 253              		.comm	angle,8,8
 254              		.global	buffer
 255              		.comm	data,33,4
 256              		.comm	pid,112,8
 257              		.section	.bss.Kd,"aw",%nobits
 258              		.align	3
 261              	Kd:
 262 0000 00000000 		.space	8
 262      00000000 
 263              		.section	.bss.Ki,"aw",%nobits
 264              		.align	3
 267              	Ki:
 268 0000 00000000 		.space	8
 268      00000000 
 269              		.section	.bss.SetPoint,"aw",%nobits
 270              		.align	3
 273              	SetPoint:
 274 0000 00000000 		.space	8
 274      00000000 
 275              		.section	.data.Kp,"aw"
 276              		.align	3
 279              	Kp:
 280 0000 00000000 		.word	0
 281 0004 0000F83F 		.word	1073217536
 282              		.section	.data.buffer,"aw"
 283              		.set	.LANCHOR0,. + 0
 286              	buffer:
 287 0000 64       		.byte	100
 288              		.text
 289              	.Letext0:
 290              		.file 2 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\machine\
 291              		.file 3 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\_st
 292              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 293              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 294              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s 			page 7


 295              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 296              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 297              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 298              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 299              		.file 11 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\lo
 300              		.file 12 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\_t
 301              		.file 13 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\lib\\gcc\\arm-none-eabi\\9.2.1\
 302              		.file 14 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\re
 303              		.file 15 "Core/Inc/pid.h"
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 AML_MPUSensor.c
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:18     .text.AML_MPUSensor_Setup:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:26     .text.AML_MPUSensor_Setup:00000000 AML_MPUSensor_Setup
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:48     .text.AML_MPUSensor_Setup:00000010 $d
                            *COM*:00000021 data
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:54     .text.test:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:61     .text.test:00000000 test
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:74     .text.handle:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:81     .text.handle:00000000 handle
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:139    .text.handle:00000040 $d
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:149    .text.HAL_UART_RxCpltCallback:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:156    .text.HAL_UART_RxCpltCallback:00000000 HAL_UART_RxCpltCallback
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:238    .text.HAL_UART_RxCpltCallback:0000005c $d
                            *COM*:00000008 angle
                            *COM*:00000070 pid
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:261    .bss.Kd:00000000 Kd
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:267    .bss.Ki:00000000 Ki
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:279    .data.Kp:00000000 Kp
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:273    .bss.SetPoint:00000000 SetPoint
                            *COM*:00000008 out
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:286    .data.buffer:00000000 buffer
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:258    .bss.Kd:00000000 $d
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:264    .bss.Ki:00000000 $d
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:270    .bss.SetPoint:00000000 $d
C:\Users\anmh1\AppData\Local\Temp\cc7KB3w3.s:276    .data.Kp:00000000 $d

UNDEFINED SYMBOLS
HAL_UART_Receive_DMA
huart1
HAL_UART_Receive
debug
__aeabi_i2d
__aeabi_dmul
PID_Compute
