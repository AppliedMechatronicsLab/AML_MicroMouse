ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"AML_MPUSensor.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.AML_MPUSensor_Setup,"ax",%progbits
  18              		.align	1
  19              		.global	AML_MPUSensor_Setup
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	AML_MPUSensor_Setup:
  27              	.LFB235:
  28              		.file 1 "Core/Src/AML_MPUSensor.c"
   1:Core/Src/AML_MPUSensor.c **** #include "AML_MPUSensor.h"
   2:Core/Src/AML_MPUSensor.c **** 
   3:Core/Src/AML_MPUSensor.c **** uint8_t ResetCommand[] = {0xFF, 0xAA, 0x52};
   4:Core/Src/AML_MPUSensor.c **** 
   5:Core/Src/AML_MPUSensor.c **** extern UART_HandleTypeDef huart1;
   6:Core/Src/AML_MPUSensor.c **** extern DMA_HandleTypeDef hdma_usart1_rx;
   7:Core/Src/AML_MPUSensor.c **** 
   8:Core/Src/AML_MPUSensor.c **** uint8_t data[33];
   9:Core/Src/AML_MPUSensor.c **** uint8_t buffer = 119;
  10:Core/Src/AML_MPUSensor.c **** extern int16_t debug[100];
  11:Core/Src/AML_MPUSensor.c **** double Angle, SaveAngle = 0, InitAngle = 0;
  12:Core/Src/AML_MPUSensor.c **** 
  13:Core/Src/AML_MPUSensor.c **** void AML_MPUSensor_Setup()
  14:Core/Src/AML_MPUSensor.c **** {
  29              		.loc 1 14 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
  15:Core/Src/AML_MPUSensor.c ****     HAL_UART_Receive_DMA(&huart1, data, 33);
  37              		.loc 1 15 5 view .LVU1
  38 0002 2122     		movs	r2, #33
  39 0004 0249     		ldr	r1, .L3
  40 0006 0348     		ldr	r0, .L3+4
  41 0008 FFF7FEFF 		bl	HAL_UART_Receive_DMA
  42              	.LVL0:
  16:Core/Src/AML_MPUSensor.c **** }
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s 			page 2


  43              		.loc 1 16 1 is_stmt 0 view .LVU2
  44 000c 08BD     		pop	{r3, pc}
  45              	.L4:
  46 000e 00BF     		.align	2
  47              	.L3:
  48 0010 00000000 		.word	data
  49 0014 00000000 		.word	huart1
  50              		.cfi_endproc
  51              	.LFE235:
  53              		.section	.text.handle,"ax",%progbits
  54              		.align	1
  55              		.global	handle
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  59              		.fpu fpv4-sp-d16
  61              	handle:
  62              	.LFB236:
  17:Core/Src/AML_MPUSensor.c **** 
  18:Core/Src/AML_MPUSensor.c **** void handle()
  19:Core/Src/AML_MPUSensor.c **** {
  63              		.loc 1 19 1 is_stmt 1 view -0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67 0000 08B5     		push	{r3, lr}
  68              		.cfi_def_cfa_offset 8
  69              		.cfi_offset 3, -8
  70              		.cfi_offset 14, -4
  20:Core/Src/AML_MPUSensor.c ****     while (buffer != 85) // wait 0x55
  71              		.loc 1 20 5 view .LVU4
  72              	.L6:
  73              		.loc 1 20 11 view .LVU5
  74              		.loc 1 20 19 is_stmt 0 view .LVU6
  75 0002 0A4B     		ldr	r3, .L10
  76 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  77              		.loc 1 20 11 view .LVU7
  78 0006 552B     		cmp	r3, #85
  79 0008 07D0     		beq	.L9
  21:Core/Src/AML_MPUSensor.c ****     {
  22:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive(&huart1, &buffer, 1, 1000);
  80              		.loc 1 22 9 is_stmt 1 view .LVU8
  81 000a 4FF47A73 		mov	r3, #1000
  82 000e 0122     		movs	r2, #1
  83 0010 0649     		ldr	r1, .L10
  84 0012 0748     		ldr	r0, .L10+4
  85 0014 FFF7FEFF 		bl	HAL_UART_Receive
  86              	.LVL1:
  87 0018 F3E7     		b	.L6
  88              	.L9:
  23:Core/Src/AML_MPUSensor.c ****     }
  24:Core/Src/AML_MPUSensor.c ****     buffer = 100;
  89              		.loc 1 24 5 view .LVU9
  90              		.loc 1 24 12 is_stmt 0 view .LVU10
  91 001a 044B     		ldr	r3, .L10
  92 001c 6422     		movs	r2, #100
  93 001e 1A70     		strb	r2, [r3]
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s 			page 3


  25:Core/Src/AML_MPUSensor.c ****     HAL_UART_Receive_DMA(&huart1, data, 33);
  94              		.loc 1 25 5 is_stmt 1 view .LVU11
  95 0020 2122     		movs	r2, #33
  96 0022 0449     		ldr	r1, .L10+8
  97 0024 0248     		ldr	r0, .L10+4
  98 0026 FFF7FEFF 		bl	HAL_UART_Receive_DMA
  99              	.LVL2:
  26:Core/Src/AML_MPUSensor.c **** }
 100              		.loc 1 26 1 is_stmt 0 view .LVU12
 101 002a 08BD     		pop	{r3, pc}
 102              	.L11:
 103              		.align	2
 104              	.L10:
 105 002c 00000000 		.word	.LANCHOR0
 106 0030 00000000 		.word	huart1
 107 0034 00000000 		.word	data
 108              		.cfi_endproc
 109              	.LFE236:
 111              		.global	__aeabi_i2d
 112              		.global	__aeabi_dmul
 113              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 114              		.align	1
 115              		.global	HAL_UART_RxCpltCallback
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 119              		.fpu fpv4-sp-d16
 121              	HAL_UART_RxCpltCallback:
 122              	.LVL3:
 123              	.LFB237:
  27:Core/Src/AML_MPUSensor.c **** 
  28:Core/Src/AML_MPUSensor.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)
  29:Core/Src/AML_MPUSensor.c **** {
 124              		.loc 1 29 1 is_stmt 1 view -0
 125              		.cfi_startproc
 126              		@ args = 0, pretend = 0, frame = 0
 127              		@ frame_needed = 0, uses_anonymous_args = 0
  30:Core/Src/AML_MPUSensor.c ****     UNUSED(huart);
 128              		.loc 1 30 5 view .LVU14
  31:Core/Src/AML_MPUSensor.c ****     if (huart->Instance == USART1)
 129              		.loc 1 31 5 view .LVU15
 130              		.loc 1 31 14 is_stmt 0 view .LVU16
 131 0000 0268     		ldr	r2, [r0]
 132              		.loc 1 31 8 view .LVU17
 133 0002 124B     		ldr	r3, .L20
 134 0004 9A42     		cmp	r2, r3
 135 0006 00D0     		beq	.L19
 136 0008 7047     		bx	lr
 137              	.L19:
  29:Core/Src/AML_MPUSensor.c ****     UNUSED(huart);
 138              		.loc 1 29 1 view .LVU18
 139 000a 10B5     		push	{r4, lr}
 140              		.cfi_def_cfa_offset 8
 141              		.cfi_offset 4, -8
 142              		.cfi_offset 14, -4
  32:Core/Src/AML_MPUSensor.c ****     {
  33:Core/Src/AML_MPUSensor.c ****         if (data[0] != 83)
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s 			page 4


 143              		.loc 1 33 9 is_stmt 1 view .LVU19
 144              		.loc 1 33 17 is_stmt 0 view .LVU20
 145 000c 104B     		ldr	r3, .L20+4
 146 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 147              		.loc 1 33 12 view .LVU21
 148 0010 532B     		cmp	r3, #83
 149 0012 02D0     		beq	.L14
  34:Core/Src/AML_MPUSensor.c ****         {
  35:Core/Src/AML_MPUSensor.c ****             handle();
 150              		.loc 1 35 13 is_stmt 1 view .LVU22
 151 0014 FFF7FEFF 		bl	handle
 152              	.LVL4:
  36:Core/Src/AML_MPUSensor.c ****             return;
 153              		.loc 1 36 13 view .LVU23
 154              	.L12:
  37:Core/Src/AML_MPUSensor.c ****         }
  38:Core/Src/AML_MPUSensor.c ****         Angle = (((data[6] << 8) | data[5]) / 32768.0) * 180;
  39:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
  40:Core/Src/AML_MPUSensor.c ****     }
  41:Core/Src/AML_MPUSensor.c **** }
 155              		.loc 1 41 1 is_stmt 0 view .LVU24
 156 0018 10BD     		pop	{r4, pc}
 157              	.LVL5:
 158              	.L14:
  38:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
 159              		.loc 1 38 9 is_stmt 1 view .LVU25
  38:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
 160              		.loc 1 38 24 is_stmt 0 view .LVU26
 161 001a 0D4C     		ldr	r4, .L20+4
 162 001c A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 163              	.LVL6:
  38:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
 164              		.loc 1 38 40 view .LVU27
 165 001e 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
  38:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
 166              		.loc 1 38 45 view .LVU28
 167 0020 43EA0020 		orr	r0, r3, r0, lsl #8
 168 0024 FFF7FEFF 		bl	__aeabi_i2d
 169              	.LVL7:
 170 0028 0022     		movs	r2, #0
 171 002a 4FF07C53 		mov	r3, #1056964608
 172 002e FFF7FEFF 		bl	__aeabi_dmul
 173              	.LVL8:
  38:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
 174              		.loc 1 38 56 view .LVU29
 175 0032 0022     		movs	r2, #0
 176 0034 074B     		ldr	r3, .L20+8
 177 0036 FFF7FEFF 		bl	__aeabi_dmul
 178              	.LVL9:
  38:Core/Src/AML_MPUSensor.c ****         HAL_UART_Receive_DMA(&huart1, data, 33);
 179              		.loc 1 38 15 view .LVU30
 180 003a 074B     		ldr	r3, .L20+12
 181 003c C3E90001 		strd	r0, [r3]
  39:Core/Src/AML_MPUSensor.c ****     }
 182              		.loc 1 39 9 is_stmt 1 view .LVU31
 183 0040 2122     		movs	r2, #33
 184 0042 2146     		mov	r1, r4
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s 			page 5


 185 0044 0548     		ldr	r0, .L20+16
 186 0046 FFF7FEFF 		bl	HAL_UART_Receive_DMA
 187              	.LVL10:
 188 004a E5E7     		b	.L12
 189              	.L21:
 190              		.align	2
 191              	.L20:
 192 004c 00100140 		.word	1073811456
 193 0050 00000000 		.word	data
 194 0054 00806640 		.word	1080459264
 195 0058 00000000 		.word	Angle
 196 005c 00000000 		.word	huart1
 197              		.cfi_endproc
 198              	.LFE237:
 200              		.section	.text.AML_MPUSensor_GetAngle,"ax",%progbits
 201              		.align	1
 202              		.global	AML_MPUSensor_GetAngle
 203              		.syntax unified
 204              		.thumb
 205              		.thumb_func
 206              		.fpu fpv4-sp-d16
 208              	AML_MPUSensor_GetAngle:
 209              	.LFB238:
  42:Core/Src/AML_MPUSensor.c **** 
  43:Core/Src/AML_MPUSensor.c **** double AML_MPUSensor_GetAngle()
  44:Core/Src/AML_MPUSensor.c **** {
 210              		.loc 1 44 1 view -0
 211              		.cfi_startproc
 212              		@ args = 0, pretend = 0, frame = 0
 213              		@ frame_needed = 0, uses_anonymous_args = 0
 214              		@ link register save eliminated.
  45:Core/Src/AML_MPUSensor.c ****     return Angle;
 215              		.loc 1 45 5 view .LVU33
  46:Core/Src/AML_MPUSensor.c **** }
 216              		.loc 1 46 1 is_stmt 0 view .LVU34
 217 0000 014B     		ldr	r3, .L23
 218 0002 93ED000B 		vldr.64	d0, [r3]
 219 0006 7047     		bx	lr
 220              	.L24:
 221              		.align	2
 222              	.L23:
 223 0008 00000000 		.word	Angle
 224              		.cfi_endproc
 225              	.LFE238:
 227              		.section	.text.AML_MPUSensor_ResetAngle,"ax",%progbits
 228              		.align	1
 229              		.global	AML_MPUSensor_ResetAngle
 230              		.syntax unified
 231              		.thumb
 232              		.thumb_func
 233              		.fpu fpv4-sp-d16
 235              	AML_MPUSensor_ResetAngle:
 236              	.LFB239:
  47:Core/Src/AML_MPUSensor.c **** 
  48:Core/Src/AML_MPUSensor.c **** uint8_t AML_MPUSensor_ResetAngle()
  49:Core/Src/AML_MPUSensor.c **** {
 237              		.loc 1 49 1 is_stmt 1 view -0
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s 			page 6


 238              		.cfi_startproc
 239              		@ args = 0, pretend = 0, frame = 0
 240              		@ frame_needed = 0, uses_anonymous_args = 0
 241 0000 08B5     		push	{r3, lr}
 242              		.cfi_def_cfa_offset 8
 243              		.cfi_offset 3, -8
 244              		.cfi_offset 14, -4
  50:Core/Src/AML_MPUSensor.c ****     return HAL_UART_Transmit(&huart1, ResetCommand, sizeof(ResetCommand), 100);
 245              		.loc 1 50 5 view .LVU36
 246              		.loc 1 50 12 is_stmt 0 view .LVU37
 247 0002 6423     		movs	r3, #100
 248 0004 0322     		movs	r2, #3
 249 0006 0249     		ldr	r1, .L27
 250 0008 0248     		ldr	r0, .L27+4
 251 000a FFF7FEFF 		bl	HAL_UART_Transmit
 252              	.LVL11:
  51:Core/Src/AML_MPUSensor.c **** }...
 253              		.loc 1 51 1 view .LVU38
 254 000e 08BD     		pop	{r3, pc}
 255              	.L28:
 256              		.align	2
 257              	.L27:
 258 0010 00000000 		.word	.LANCHOR1
 259 0014 00000000 		.word	huart1
 260              		.cfi_endproc
 261              	.LFE239:
 263              		.global	InitAngle
 264              		.global	SaveAngle
 265              		.comm	Angle,8,8
 266              		.global	buffer
 267              		.comm	data,33,4
 268              		.global	ResetCommand
 269              		.section	.bss.InitAngle,"aw",%nobits
 270              		.align	3
 273              	InitAngle:
 274 0000 00000000 		.space	8
 274      00000000 
 275              		.section	.bss.SaveAngle,"aw",%nobits
 276              		.align	3
 279              	SaveAngle:
 280 0000 00000000 		.space	8
 280      00000000 
 281              		.section	.data.ResetCommand,"aw"
 282              		.align	2
 283              		.set	.LANCHOR1,. + 0
 286              	ResetCommand:
 287 0000 FFAA52   		.ascii	"\377\252R"
 288              		.section	.data.buffer,"aw"
 289              		.set	.LANCHOR0,. + 0
 292              	buffer:
 293 0000 77       		.byte	119
 294              		.text
 295              	.Letext0:
 296              		.file 2 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\machine\
 297              		.file 3 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\_st
 298              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 299              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s 			page 7


 300              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 301              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 302              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 303              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 304              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 305              		.file 11 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\lo
 306              		.file 12 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\_t
 307              		.file 13 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\lib\\gcc\\arm-none-eabi\\9.2.1\
 308              		.file 14 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\re
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 AML_MPUSensor.c
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:18     .text.AML_MPUSensor_Setup:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:26     .text.AML_MPUSensor_Setup:00000000 AML_MPUSensor_Setup
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:48     .text.AML_MPUSensor_Setup:00000010 $d
                            *COM*:00000021 data
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:54     .text.handle:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:61     .text.handle:00000000 handle
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:105    .text.handle:0000002c $d
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:114    .text.HAL_UART_RxCpltCallback:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:121    .text.HAL_UART_RxCpltCallback:00000000 HAL_UART_RxCpltCallback
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:192    .text.HAL_UART_RxCpltCallback:0000004c $d
                            *COM*:00000008 Angle
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:201    .text.AML_MPUSensor_GetAngle:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:208    .text.AML_MPUSensor_GetAngle:00000000 AML_MPUSensor_GetAngle
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:223    .text.AML_MPUSensor_GetAngle:00000008 $d
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:228    .text.AML_MPUSensor_ResetAngle:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:235    .text.AML_MPUSensor_ResetAngle:00000000 AML_MPUSensor_ResetAngle
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:258    .text.AML_MPUSensor_ResetAngle:00000010 $d
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:273    .bss.InitAngle:00000000 InitAngle
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:279    .bss.SaveAngle:00000000 SaveAngle
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:292    .data.buffer:00000000 buffer
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:286    .data.ResetCommand:00000000 ResetCommand
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:270    .bss.InitAngle:00000000 $d
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:276    .bss.SaveAngle:00000000 $d
C:\Users\anmh1\AppData\Local\Temp\ccKREw67.s:282    .data.ResetCommand:00000000 $d

UNDEFINED SYMBOLS
HAL_UART_Receive_DMA
huart1
HAL_UART_Receive
__aeabi_i2d
__aeabi_dmul
HAL_UART_Transmit
