ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"AML_Keyboard.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.AML_Keyboard_GetKey,"ax",%progbits
  18              		.align	1
  19              		.global	AML_Keyboard_GetKey
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	AML_Keyboard_GetKey:
  27              	.LFB130:
  28              		.file 1 "Core/Src/AML_Keyboard.c"
   1:Core/Src/AML_Keyboard.c **** #include "AML_Keyboard.h"
   2:Core/Src/AML_Keyboard.c **** 
   3:Core/Src/AML_Keyboard.c **** // extern ADC_HandleTypeDef hadc1;
   4:Core/Src/AML_Keyboard.c **** extern int16_t debug[100];
   5:Core/Src/AML_Keyboard.c **** 
   6:Core/Src/AML_Keyboard.c **** typedef enum
   7:Core/Src/AML_Keyboard.c **** {
   8:Core/Src/AML_Keyboard.c ****     A,
   9:Core/Src/AML_Keyboard.c ****     B,
  10:Core/Src/AML_Keyboard.c ****     C,
  11:Core/Src/AML_Keyboard.c ****     D,
  12:Core/Src/AML_Keyboard.c ****     E,
  13:Core/Src/AML_Keyboard.c ****     nothing
  14:Core/Src/AML_Keyboard.c **** } ButtonName;
  15:Core/Src/AML_Keyboard.c **** 
  16:Core/Src/AML_Keyboard.c **** uint32_t ADCValue = 4100;
  17:Core/Src/AML_Keyboard.c **** uint16_t CompareValue[] = {150, 450, 750, 1000, 3900, 4100};
  18:Core/Src/AML_Keyboard.c **** //         button         A,   B,   C,    D,    E,  nothing
  19:Core/Src/AML_Keyboard.c **** 
  20:Core/Src/AML_Keyboard.c **** // void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef *hadc)
  21:Core/Src/AML_Keyboard.c **** // {
  22:Core/Src/AML_Keyboard.c **** //     if (hadc->Instance == hadc1.Instance) // kiểm tra ADC nào gây ra ngắt
  23:Core/Src/AML_Keyboard.c **** //     {
  24:Core/Src/AML_Keyboard.c **** //         ADCValue = HAL_ADC_GetValue(&hadc1);
  25:Core/Src/AML_Keyboard.c **** //         debug[4]++;
  26:Core/Src/AML_Keyboard.c **** //     }
  27:Core/Src/AML_Keyboard.c **** // }
  28:Core/Src/AML_Keyboard.c **** 
  29:Core/Src/AML_Keyboard.c **** uint8_t AML_Keyboard_GetKey()
  30:Core/Src/AML_Keyboard.c **** {
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s 			page 2


  29              		.loc 1 30 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
  31:Core/Src/AML_Keyboard.c ****     // ADCValue = HAL_ADC_GetValue(&hadc1);
  32:Core/Src/AML_Keyboard.c ****     // for (int i = 0; i < 5; i++)
  33:Core/Src/AML_Keyboard.c ****     // {
  34:Core/Src/AML_Keyboard.c ****     //     if (ADCValue < CompareValue[i])
  35:Core/Src/AML_Keyboard.c ****     //         return i;
  36:Core/Src/AML_Keyboard.c ****     // }
  37:Core/Src/AML_Keyboard.c **** 
  38:Core/Src/AML_Keyboard.c ****     return HAL_GPIO_ReadPin(GPIOA, GPIO_PIN_0);
  37              		.loc 1 38 5 view .LVU1
  38              		.loc 1 38 12 is_stmt 0 view .LVU2
  39 0002 0121     		movs	r1, #1
  40 0004 0148     		ldr	r0, .L3
  41 0006 FFF7FEFF 		bl	HAL_GPIO_ReadPin
  42              	.LVL0:
  39:Core/Src/AML_Keyboard.c **** }
  43              		.loc 1 39 1 view .LVU3
  44 000a 08BD     		pop	{r3, pc}
  45              	.L4:
  46              		.align	2
  47              	.L3:
  48 000c 00000240 		.word	1073872896
  49              		.cfi_endproc
  50              	.LFE130:
  52              		.section	.text.AML_Keyboard_Setup,"ax",%progbits
  53              		.align	1
  54              		.global	AML_Keyboard_Setup
  55              		.syntax unified
  56              		.thumb
  57              		.thumb_func
  58              		.fpu fpv4-sp-d16
  60              	AML_Keyboard_Setup:
  61              	.LFB131:
  40:Core/Src/AML_Keyboard.c **** 
  41:Core/Src/AML_Keyboard.c **** // void AML_Keyboard_WaitStartKey()
  42:Core/Src/AML_Keyboard.c **** // {
  43:Core/Src/AML_Keyboard.c **** //     while (1)
  44:Core/Src/AML_Keyboard.c **** //     {
  45:Core/Src/AML_Keyboard.c **** //         if (AML_Keyboard_GetKey() != 5)
  46:Core/Src/AML_Keyboard.c **** //             return;
  47:Core/Src/AML_Keyboard.c **** //     }
  48:Core/Src/AML_Keyboard.c **** // }
  49:Core/Src/AML_Keyboard.c **** 
  50:Core/Src/AML_Keyboard.c **** void AML_Keyboard_Setup()
  51:Core/Src/AML_Keyboard.c **** {
  62              		.loc 1 51 1 is_stmt 1 view -0
  63              		.cfi_startproc
  64              		@ args = 0, pretend = 0, frame = 0
  65              		@ frame_needed = 0, uses_anonymous_args = 0
  66              		@ link register save eliminated.
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s 			page 3


  52:Core/Src/AML_Keyboard.c ****     
  53:Core/Src/AML_Keyboard.c **** }
  67              		.loc 1 53 1 view .LVU5
  68 0000 7047     		bx	lr
  69              		.cfi_endproc
  70              	.LFE131:
  72              		.global	CompareValue
  73              		.global	ADCValue
  74              		.section	.data.ADCValue,"aw"
  75              		.align	2
  78              	ADCValue:
  79 0000 04100000 		.word	4100
  80              		.section	.data.CompareValue,"aw"
  81              		.align	2
  84              	CompareValue:
  85 0000 9600     		.short	150
  86 0002 C201     		.short	450
  87 0004 EE02     		.short	750
  88 0006 E803     		.short	1000
  89 0008 3C0F     		.short	3900
  90 000a 0410     		.short	4100
  91              		.text
  92              	.Letext0:
  93              		.file 2 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\machine\
  94              		.file 3 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\_st
  95              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
  96              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
  97              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
  98              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
  99              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 AML_Keyboard.c
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:18     .text.AML_Keyboard_GetKey:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:26     .text.AML_Keyboard_GetKey:00000000 AML_Keyboard_GetKey
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:48     .text.AML_Keyboard_GetKey:0000000c $d
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:53     .text.AML_Keyboard_Setup:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:60     .text.AML_Keyboard_Setup:00000000 AML_Keyboard_Setup
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:84     .data.CompareValue:00000000 CompareValue
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:78     .data.ADCValue:00000000 ADCValue
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:75     .data.ADCValue:00000000 $d
C:\Users\anmh1\AppData\Local\Temp\cc8mXptk.s:81     .data.CompareValue:00000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_ReadPin
