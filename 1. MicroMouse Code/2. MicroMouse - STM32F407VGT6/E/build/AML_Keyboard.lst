ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"AML_Keyboard.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.HAL_ADC_ConvCpltCallback,"ax",%progbits
  18              		.align	1
  19              		.global	HAL_ADC_ConvCpltCallback
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	HAL_ADC_ConvCpltCallback:
  27              	.LVL0:
  28              	.LFB235:
  29              		.file 1 "Core/Src/AML_Keyboard.c"
   1:Core/Src/AML_Keyboard.c **** #include "AML_Keyboard.h"
   2:Core/Src/AML_Keyboard.c **** 
   3:Core/Src/AML_Keyboard.c **** extern ADC_HandleTypeDef hadc1;
   4:Core/Src/AML_Keyboard.c **** extern int16_t debug[100];
   5:Core/Src/AML_Keyboard.c **** 
   6:Core/Src/AML_Keyboard.c **** typedef enum
   7:Core/Src/AML_Keyboard.c **** {
   8:Core/Src/AML_Keyboard.c ****     A,
   9:Core/Src/AML_Keyboard.c ****     B,
  10:Core/Src/AML_Keyboard.c ****     C,
  11:Core/Src/AML_Keyboard.c ****     D,
  12:Core/Src/AML_Keyboard.c ****     E,
  13:Core/Src/AML_Keyboard.c ****     nothing
  14:Core/Src/AML_Keyboard.c **** } ButtonName;
  15:Core/Src/AML_Keyboard.c **** 
  16:Core/Src/AML_Keyboard.c **** uint16_t ADCValue = 4100;
  17:Core/Src/AML_Keyboard.c **** uint16_t CompareValue[] = {150, 350, 600, 1000, 3200, 4100};
  18:Core/Src/AML_Keyboard.c **** //         button         A,   B,   C,    D,    E,  nothing
  19:Core/Src/AML_Keyboard.c **** 
  20:Core/Src/AML_Keyboard.c **** void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef *hadc)
  21:Core/Src/AML_Keyboard.c **** {
  30              		.loc 1 21 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 21 1 is_stmt 0 view .LVU1
  35 0000 08B5     		push	{r3, lr}
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s 			page 2


  38              		.cfi_offset 14, -4
  22:Core/Src/AML_Keyboard.c ****     if (hadc->Instance == hadc1.Instance) // kiểm tra ADC nào gây ra ngắt
  39              		.loc 1 22 5 is_stmt 1 view .LVU2
  40              		.loc 1 22 13 is_stmt 0 view .LVU3
  41 0002 0268     		ldr	r2, [r0]
  42              		.loc 1 22 32 view .LVU4
  43 0004 054B     		ldr	r3, .L5
  44 0006 1B68     		ldr	r3, [r3]
  45              		.loc 1 22 8 view .LVU5
  46 0008 9A42     		cmp	r2, r3
  47 000a 00D0     		beq	.L4
  48              	.LVL1:
  49              	.L1:
  23:Core/Src/AML_Keyboard.c ****     {
  24:Core/Src/AML_Keyboard.c ****         ADCValue = HAL_ADC_GetValue(&hadc1);
  25:Core/Src/AML_Keyboard.c **** 
  26:Core/Src/AML_Keyboard.c ****     }
  27:Core/Src/AML_Keyboard.c **** }
  50              		.loc 1 27 1 view .LVU6
  51 000c 08BD     		pop	{r3, pc}
  52              	.LVL2:
  53              	.L4:
  24:Core/Src/AML_Keyboard.c **** 
  54              		.loc 1 24 9 is_stmt 1 view .LVU7
  24:Core/Src/AML_Keyboard.c **** 
  55              		.loc 1 24 20 is_stmt 0 view .LVU8
  56 000e 0348     		ldr	r0, .L5
  57              	.LVL3:
  24:Core/Src/AML_Keyboard.c **** 
  58              		.loc 1 24 20 view .LVU9
  59 0010 FFF7FEFF 		bl	HAL_ADC_GetValue
  60              	.LVL4:
  24:Core/Src/AML_Keyboard.c **** 
  61              		.loc 1 24 18 view .LVU10
  62 0014 024B     		ldr	r3, .L5+4
  63 0016 1880     		strh	r0, [r3]	@ movhi
  64              		.loc 1 27 1 view .LVU11
  65 0018 F8E7     		b	.L1
  66              	.L6:
  67 001a 00BF     		.align	2
  68              	.L5:
  69 001c 00000000 		.word	hadc1
  70 0020 00000000 		.word	.LANCHOR0
  71              		.cfi_endproc
  72              	.LFE235:
  74              		.section	.text.AML_Keyboard_GetKey,"ax",%progbits
  75              		.align	1
  76              		.global	AML_Keyboard_GetKey
  77              		.syntax unified
  78              		.thumb
  79              		.thumb_func
  80              		.fpu fpv4-sp-d16
  82              	AML_Keyboard_GetKey:
  83              	.LFB236:
  28:Core/Src/AML_Keyboard.c **** 
  29:Core/Src/AML_Keyboard.c **** uint8_t AML_Keyboard_GetKey()
  30:Core/Src/AML_Keyboard.c **** {
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s 			page 3


  84              		.loc 1 30 1 is_stmt 1 view -0
  85              		.cfi_startproc
  86              		@ args = 0, pretend = 0, frame = 0
  87              		@ frame_needed = 0, uses_anonymous_args = 0
  88              		@ link register save eliminated.
  31:Core/Src/AML_Keyboard.c ****     for (int i = 0; i < 5; i++)
  89              		.loc 1 31 5 view .LVU13
  90              	.LBB2:
  91              		.loc 1 31 10 view .LVU14
  92              	.LVL5:
  93              		.loc 1 31 14 is_stmt 0 view .LVU15
  94 0000 0020     		movs	r0, #0
  95              	.LVL6:
  96              	.L8:
  97              		.loc 1 31 21 is_stmt 1 discriminator 1 view .LVU16
  98              		.loc 1 31 5 is_stmt 0 discriminator 1 view .LVU17
  99 0002 0428     		cmp	r0, #4
 100 0004 0ADC     		bgt	.L11
  32:Core/Src/AML_Keyboard.c ****     {
  33:Core/Src/AML_Keyboard.c ****         if (ADCValue < CompareValue[i])
 101              		.loc 1 33 9 is_stmt 1 view .LVU18
 102              		.loc 1 33 36 is_stmt 0 view .LVU19
 103 0006 064B     		ldr	r3, .L13
 104 0008 33F81020 		ldrh	r2, [r3, r0, lsl #1]
 105              		.loc 1 33 22 view .LVU20
 106 000c 054B     		ldr	r3, .L13+4
 107 000e 1B88     		ldrh	r3, [r3]
 108              		.loc 1 33 12 view .LVU21
 109 0010 9A42     		cmp	r2, r3
 110 0012 01D8     		bhi	.L12
  31:Core/Src/AML_Keyboard.c ****     for (int i = 0; i < 5; i++)
 111              		.loc 1 31 28 is_stmt 1 discriminator 2 view .LVU22
  31:Core/Src/AML_Keyboard.c ****     for (int i = 0; i < 5; i++)
 112              		.loc 1 31 29 is_stmt 0 discriminator 2 view .LVU23
 113 0014 0130     		adds	r0, r0, #1
 114              	.LVL7:
  31:Core/Src/AML_Keyboard.c ****     for (int i = 0; i < 5; i++)
 115              		.loc 1 31 29 discriminator 2 view .LVU24
 116 0016 F4E7     		b	.L8
 117              	.L12:
  34:Core/Src/AML_Keyboard.c ****             return i;
 118              		.loc 1 34 13 is_stmt 1 view .LVU25
 119              		.loc 1 34 20 is_stmt 0 view .LVU26
 120 0018 C0B2     		uxtb	r0, r0
 121              	.LVL8:
 122              		.loc 1 34 20 view .LVU27
 123 001a 7047     		bx	lr
 124              	.LVL9:
 125              	.L11:
 126              	.LVL10:
 127              		.loc 1 34 20 view .LVU28
 128              	.LBE2:
  35:Core/Src/AML_Keyboard.c ****     }
  36:Core/Src/AML_Keyboard.c **** }
 129              		.loc 1 36 1 view .LVU29
 130 001c 7047     		bx	lr
 131              	.L14:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s 			page 4


 132 001e 00BF     		.align	2
 133              	.L13:
 134 0020 00000000 		.word	.LANCHOR1
 135 0024 00000000 		.word	.LANCHOR0
 136              		.cfi_endproc
 137              	.LFE236:
 139              		.section	.text.AML_Keyboard_WaitStartKey,"ax",%progbits
 140              		.align	1
 141              		.global	AML_Keyboard_WaitStartKey
 142              		.syntax unified
 143              		.thumb
 144              		.thumb_func
 145              		.fpu fpv4-sp-d16
 147              	AML_Keyboard_WaitStartKey:
 148              	.LFB237:
  37:Core/Src/AML_Keyboard.c **** 
  38:Core/Src/AML_Keyboard.c **** void AML_Keyboard_WaitStartKey()
  39:Core/Src/AML_Keyboard.c **** {
 149              		.loc 1 39 1 is_stmt 1 view -0
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 0
 152              		@ frame_needed = 0, uses_anonymous_args = 0
 153 0000 08B5     		push	{r3, lr}
 154              		.cfi_def_cfa_offset 8
 155              		.cfi_offset 3, -8
 156              		.cfi_offset 14, -4
  40:Core/Src/AML_Keyboard.c ****     debug[0] = 0;
 157              		.loc 1 40 5 view .LVU31
 158              		.loc 1 40 14 is_stmt 0 view .LVU32
 159 0002 064B     		ldr	r3, .L18
 160 0004 0022     		movs	r2, #0
 161 0006 1A80     		strh	r2, [r3]	@ movhi
 162              	.L16:
  41:Core/Src/AML_Keyboard.c ****     while (1)
 163              		.loc 1 41 5 is_stmt 1 view .LVU33
  42:Core/Src/AML_Keyboard.c ****     {
  43:Core/Src/AML_Keyboard.c ****         debug[0] = AML_Keyboard_GetKey();
 164              		.loc 1 43 9 view .LVU34
 165              		.loc 1 43 20 is_stmt 0 view .LVU35
 166 0008 FFF7FEFF 		bl	AML_Keyboard_GetKey
 167              	.LVL11:
 168              		.loc 1 43 18 view .LVU36
 169 000c 034B     		ldr	r3, .L18
 170 000e 1880     		strh	r0, [r3]	@ movhi
  44:Core/Src/AML_Keyboard.c ****         if (AML_Keyboard_GetKey() != 5)
 171              		.loc 1 44 9 is_stmt 1 view .LVU37
 172              		.loc 1 44 13 is_stmt 0 view .LVU38
 173 0010 FFF7FEFF 		bl	AML_Keyboard_GetKey
 174              	.LVL12:
 175              		.loc 1 44 12 view .LVU39
 176 0014 0528     		cmp	r0, #5
 177 0016 F7D0     		beq	.L16
  45:Core/Src/AML_Keyboard.c ****             return;
  46:Core/Src/AML_Keyboard.c ****     }
  47:Core/Src/AML_Keyboard.c **** }
 178              		.loc 1 47 1 view .LVU40
 179 0018 08BD     		pop	{r3, pc}
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s 			page 5


 180              	.L19:
 181 001a 00BF     		.align	2
 182              	.L18:
 183 001c 00000000 		.word	debug
 184              		.cfi_endproc
 185              	.LFE237:
 187              		.section	.text.AML_Keyboard_Setup,"ax",%progbits
 188              		.align	1
 189              		.global	AML_Keyboard_Setup
 190              		.syntax unified
 191              		.thumb
 192              		.thumb_func
 193              		.fpu fpv4-sp-d16
 195              	AML_Keyboard_Setup:
 196              	.LFB238:
  48:Core/Src/AML_Keyboard.c **** 
  49:Core/Src/AML_Keyboard.c **** void AML_Keyboard_Setup()
  50:Core/Src/AML_Keyboard.c **** {
 197              		.loc 1 50 1 is_stmt 1 view -0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 0
 200              		@ frame_needed = 0, uses_anonymous_args = 0
 201 0000 08B5     		push	{r3, lr}
 202              		.cfi_def_cfa_offset 8
 203              		.cfi_offset 3, -8
 204              		.cfi_offset 14, -4
  51:Core/Src/AML_Keyboard.c ****     HAL_ADC_Start_IT(&hadc1);
 205              		.loc 1 51 5 view .LVU42
 206 0002 0248     		ldr	r0, .L22
 207 0004 FFF7FEFF 		bl	HAL_ADC_Start_IT
 208              	.LVL13:
  52:Core/Src/AML_Keyboard.c **** }
 209              		.loc 1 52 1 is_stmt 0 view .LVU43
 210 0008 08BD     		pop	{r3, pc}
 211              	.L23:
 212 000a 00BF     		.align	2
 213              	.L22:
 214 000c 00000000 		.word	hadc1
 215              		.cfi_endproc
 216              	.LFE238:
 218              		.global	CompareValue
 219              		.global	ADCValue
 220              		.section	.data.ADCValue,"aw"
 221              		.align	1
 222              		.set	.LANCHOR0,. + 0
 225              	ADCValue:
 226 0000 0410     		.short	4100
 227              		.section	.data.CompareValue,"aw"
 228              		.align	2
 229              		.set	.LANCHOR1,. + 0
 232              	CompareValue:
 233 0000 9600     		.short	150
 234 0002 5E01     		.short	350
 235 0004 5802     		.short	600
 236 0006 E803     		.short	1000
 237 0008 800C     		.short	3200
 238 000a 0410     		.short	4100
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s 			page 6


 239              		.text
 240              	.Letext0:
 241              		.file 2 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\machine\
 242              		.file 3 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\_st
 243              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 244              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 245              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 246              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 247              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 248              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 249              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 250              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 AML_Keyboard.c
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:18     .text.HAL_ADC_ConvCpltCallback:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:26     .text.HAL_ADC_ConvCpltCallback:00000000 HAL_ADC_ConvCpltCallback
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:69     .text.HAL_ADC_ConvCpltCallback:0000001c $d
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:75     .text.AML_Keyboard_GetKey:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:82     .text.AML_Keyboard_GetKey:00000000 AML_Keyboard_GetKey
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:134    .text.AML_Keyboard_GetKey:00000020 $d
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:140    .text.AML_Keyboard_WaitStartKey:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:147    .text.AML_Keyboard_WaitStartKey:00000000 AML_Keyboard_WaitStartKey
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:183    .text.AML_Keyboard_WaitStartKey:0000001c $d
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:188    .text.AML_Keyboard_Setup:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:195    .text.AML_Keyboard_Setup:00000000 AML_Keyboard_Setup
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:214    .text.AML_Keyboard_Setup:0000000c $d
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:232    .data.CompareValue:00000000 CompareValue
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:225    .data.ADCValue:00000000 ADCValue
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:221    .data.ADCValue:00000000 $d
C:\Users\anmh1\AppData\Local\Temp\cc2sw7a8.s:228    .data.CompareValue:00000000 $d

UNDEFINED SYMBOLS
HAL_ADC_GetValue
hadc1
debug
HAL_ADC_Start_IT
